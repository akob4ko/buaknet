<!DOCTYPE html>
<html lang="en">
<head>
    <title>Buaknet</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Buaknet is a handwritten digit classifier.">
    <meta name="author" content="ako">
    <meta name="keywords" content="Python, MNIST, CNN, Neural Network
		Convolutional Neural Network, Javascript, Digit classifier, numbers detect">
    <link rel="stylesheet" href="/static/css/main.css" />
    <link rel="icon" href="/static/images/favicon.ico" type="image/x-icon">
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
    <!-- Custom styles for this template -->
    <link href="/static/css/main.css" rel="stylesheet">
</head>
<body>
<section>
    <div class="container text-center">
            <h2>Draw a digit from 0 to 9</h2>
            <canvas id="paint" width="250" height="250" style="background-color:white; border: 1px solid #000000;">
                Update your browser to support HTML5 Canvas</canvas>
            <textarea id="data-paint" style="width:40%; display:none;"></textarea>
            <div>
                <a id="clear" data-tool="eraser" class="btn btn-info">Clear</a>
                <a href=# id=post_data class="btn btn-secondary">Submit</a>
            </div>
            <div id="res">
                <span style="color: #669bf6; font-size: 20pt;" id=result></span>
                <span style="color: #669bf6; font-size: 20pt;" id=probability></span>
        </div>
    </div>
</section>
</body>
<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/paint.js"></script>
<!--
 Code adapted from here:http://luisvalesilva.com/datasimple/digitre.html
 Original code by BY luisvalesilva
-->
<script type="text/javascript">
    $root = {{ request.script_root|tojson|safe }};
    $(function() {
        $('a#post_data').bind('click', function() {
            $.ajax({
                url : $root + '/get_digit',
                type: "POST",
                data: JSON.stringify([
                    {digit: $('textarea[id="data-paint"]').val()}
                ]),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(data){
                    $("#result").text(data.result);
                    $("#probability").text(data.probability);
                }
            });
            return false;
        });
    });
</script>
</html>